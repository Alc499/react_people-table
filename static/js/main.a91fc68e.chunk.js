(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(22)},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),s=a(9),i=a(1),c=a.n(i),m=a(8),d=a(2),u=a(3),h=a(5),p=a(4),f=a(6),b=(a(21),a(13)),E=function(){var e=Object(m.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://mate-academy.github.io/react_people-table/api/people.json").then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return t=e.sent,e.abrupt("return",t.map(function(e,a){return Object(b.a)({},e,{id:a+1,age:e.died-e.born,century:Math.ceil(e.died/100),children:t.filter(function(t){return t.father===e.name||t.mother===e.name}).map(function(e){return e.name})})}));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),_=a(10),g=a.n(_),y=function(e){var t=e.person,a=e.onSelected,n=e.selected,l=g()("person","person__lived-in-".concat(t.century),{"person--selected":n,person__female:"f"===t.sex,person__male:"m"===t.sex,"person__lived-at-least-65":t.age>65,person__father:"m"===t.sex&&t.children.length>0,person__mother:"f"===t.sex&&t.children.length>0}),o=g()({"person__born-before-1650":t.born<1650,"person__died-after-1800":t.died>1800});return r.a.createElement("tr",{className:l,onClick:a},r.a.createElement("td",null,t.id),r.a.createElement("td",{className:o},t.name),r.a.createElement("td",null,t.sex),r.a.createElement("td",null,t.born),r.a.createElement("td",null,t.died),r.a.createElement("td",null,t.age),r.a.createElement("td",null,null===t.mother||""===t.mother?"unknown":t.mother),r.a.createElement("td",null,null===t.father||""===t.father?"unknown":t.father),r.a.createElement("td",null,t.children.length>0?t.children.join(", "):"unknown"))},N=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectedPersonId:null},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.people,a=this.state.selectedPersonId;return r.a.createElement("table",{className:"people-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Sex"),r.a.createElement("th",null,"Born"),r.a.createElement("th",null,"Died"),r.a.createElement("th",null,"Age"),r.a.createElement("th",null,"Mother"),r.a.createElement("th",null,"Father"),r.a.createElement("th",null,"Children"))),r.a.createElement("tbody",null,t.map(function(t){return r.a.createElement(y,{person:t,key:t.id,selected:t.id===a,onSelected:function(){return e.setState({selectedPersonId:t.id})}})})))}}]),t}(r.a.Component),F=function(e,t,a,n){return t===e?a.reverse():(t=e,a=Object(s.a)(n).sort(function(t,a){switch(typeof t[e]){case"string":return t[e].localeCompare(a[e]);case"number":case"boolean":return t[e]-a[e];default:return 0}}))},x=a(7),C=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",sex:"",born:"",died:"",mother:"",father:"",children:[],errorsMap:{name:"",born:"",age:"",sex:""}},a.handleFormSubmit=function(e){var t=a.props,n=t.onSubmit,r=t.peopleAmmount,l={};e.preventDefault(),a.setState(function(e){var t=e.died,a=e.born,o=e.name,s=e.sex,i=e.children,c=e.mother,m=e.father,d=""===t?2019-+a:+t-+a;return o||(l.name="Name is required"),a||(l.born="Year of birth is required"),s||(l.sex="Please, choose your gender"),(d<0||d>150)&&(l.age="Invalid year of birth and/or year of death"),Object.keys(l).length>0?{errorsMap:l}:(n({id:r+1,age:""===t?2019-+a:+t-+a,name:o,sex:s,born:+a,died:""===t?"":+t,children:i,mother:c,father:m}),{})}),a.setState({name:"",sex:"",born:"",died:"",mother:"",father:"",children:[]})},a.handleFieldChange=function(e){var t=e.target,n=t.name,r=t.value,l=t.checked;if("checkbox"===t.type)a.setState(Object(x.a)({},n,l));else if("children"===n)a.setState({children:r.replace(/[^\w, ]/,"").split(", ")});else{var o;a.setState((o={},Object(x.a)(o,n,r.replace(/[^\w ]/,"")),Object(x.a)(o,"errorsMap",{name:"",born:""}),o))}},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.died,a=e.born,n=e.name,l=e.children,o=e.mother,s=e.father,i=e.errorsMap;return r.a.createElement("form",{className:"add-person-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name-field"},"Person's name:",r.a.createElement("input",{className:"add-person-form__field",id:"name-field",type:"text",name:"name",value:n,placeholder:"FirstName LastName",onChange:this.handleFieldChange})),i.name&&r.a.createElement("div",{className:"add-person-form__error"},i.name)),r.a.createElement("div",{className:"add-person-form__sex-fields"},r.a.createElement("label",{htmlFor:"male-sex"},r.a.createElement("input",{className:"add-person-form__field add-person-form__sex-field",id:"male-sex",type:"radio",name:"sex",value:"m",onChange:this.handleFieldChange}),"Male"),r.a.createElement("label",{htmlFor:"female-sex"},r.a.createElement("input",{className:"add-person-form__field add-person-form__sex-field",id:"female-sex",type:"radio",name:"sex",value:"f",onChange:this.handleFieldChange}),"Female"),i.sex&&r.a.createElement("div",{className:"add-person-form__error"},i.sex)),r.a.createElement("div",{className:"add-person-form__years-fields"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"born-field"},"Year of birth:",r.a.createElement("input",{className:"add-person-form__field add-person-form__years-field",id:"born-field",type:"number",name:"born",value:a,min:"0",placeholder:(new Date).getFullYear(),onChange:this.handleFieldChange})),i.born&&r.a.createElement("div",{className:"add-person-form__error"},i.born)),r.a.createElement("label",{htmlFor:"dead-field"},"Year of death:",r.a.createElement("input",{className:"add-person-form__field add-person-form__years-field",id:"dead-field",type:"number",name:"died",value:t,min:"0",placeholder:(new Date).getFullYear(),onChange:this.handleFieldChange}))),i.age&&r.a.createElement("div",{className:"add-person-form__error"},i.age),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"mother-field"},"Person mother's name:",r.a.createElement("input",{className:"add-person-form__field",id:"mother-field",type:"text",name:"mother",value:o,placeholder:"FirstName LastName",onChange:this.handleFieldChange}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"father-field"},"Person father's name:",r.a.createElement("input",{className:"add-person-form__field",id:"father-field",type:"text",name:"father",value:s,placeholder:"FirstName LastName",onChange:this.handleFieldChange}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"children-field"},"Person children's names:",r.a.createElement("input",{className:"add-person-form__field",id:"children-field",type:"text",name:"children",value:l,placeholder:"Please, separate names by comma",onChange:this.handleFieldChange}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"add-person-form__btn"},"Add")))}}]),t}(r.a.Component),j=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={people:[],visiblePeople:[],sortField:"id",currentKey:"",sortedPeople:[],isVisible:!1},a.loadData=Object(m.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,a.setState({people:t,visiblePeople:t});case 4:case"end":return e.stop()}},e)})),a.sortBy=function(e){a.setState(function(t){var a=t.people,n=t.currentKey,r=t.sortedPeople;return{sortField:e,visiblePeople:F(e,n,r,a)}})},a.handleFilter=function(e){var t=e.target.value;t=t.toLowerCase().trim(),a.setState(function(e){return{visiblePeople:e.people.filter(function(e){return(e.name+e.mother+e.father).toLowerCase().includes(t)})}})},a.toggleForm=function(){a.setState(function(e){return{isVisible:!e.isVisible}})},a.addNewPerson=function(e){a.setState(function(t){var a=[].concat(Object(s.a)(t.people),[e]);return{people:a,visiblePeople:a}})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.visiblePeople,n=t.isVisible;return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"People table"),r.a.createElement("div",{className:"sort-buttons"},r.a.createElement("h2",null,"Sort by:"),r.a.createElement("button",{type:"button",onClick:function(){return e.sortBy("id")},className:"sort-buttons__btn"},"ID"),r.a.createElement("button",{type:"button",onClick:function(){return e.sortBy("name")},className:"sort-buttons__btn"},"Name"),r.a.createElement("button",{type:"button",onClick:function(){return e.sortBy("age")},className:"sort-buttons__btn"},"Age"),r.a.createElement("button",{type:"button",onClick:function(){return e.sortBy("born")},className:"sort-buttons__btn"},"Year of birth"),r.a.createElement("button",{type:"button",onClick:function(){return e.sortBy("died")},className:"sort-buttons__btn"},"Year of death")),r.a.createElement("div",{className:"filter-input"},r.a.createElement("label",{htmlFor:"name-input"},"Filter:",r.a.createElement("input",{className:"filter-input__input",type:"text",id:"name-input",onChange:this.handleFilter}))),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{peopleAmmount:a.length,onSubmit:this.addNewPerson}),r.a.createElement("div",{className:"toggle-btn"},r.a.createElement("button",{type:"button",onClick:this.toggleForm,className:"toggle-btn"},"Hide form"))):r.a.createElement("div",{className:"toggle-btn"},r.a.createElement("button",{type:"button",onClick:this.toggleForm,className:"toggle-btn"},"Add new person")),r.a.createElement(N,{people:a}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(j,{test:123}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a91fc68e.chunk.js.map